<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>‚ù§Ô∏è‚ù§Ô∏è Eine Frage an meinen Lieblingsmensch ‚ù§Ô∏è‚ù§Ô∏è</title>

<style>
body {
  margin: 0;
  height: 100vh;
  font-family: Arial, sans-serif;
  background: #ffe6ec;
  overflow: hidden;
  
  display: flex;              /* Flexbox aktivieren */
  justify-content: center;    /* horizontal zentrieren */
  align-items: center;        /* vertikal zentrieren */
}

.container {
  background: #ffd1dc;
  padding: 30px;
  border-radius: 15px;
  text-align: center;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  position: relative;
  z-index: 1;
  max-width: 90%;
  /* margin entfernen, Flexbox zentriert automatisch */
}

h1 {
  margin-bottom: 25px;
  color: #880d3b;
}

button {
  font-size: 18px;
  padding: 12px 25px;
  margin: 10px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
}

#yes {
  background: pink;
  transition: transform 0.3s, background 0.3s;
  position: relative;
  z-index: 1;
}

#no {
  position: absolute;
  background: #ddd;
  z-index: 1;
}

.meme {
  max-width: 320px;
  max-height: 320px;
  border-radius: 15px;
  margin-top: 20px;
  display: block;
  margin-left: auto;
  margin-right: auto;
}
</style>
</head>

<body>

<div class="container" id="questionBox">
  <h1>Demet,<br>willst du meine Valentine sein? ‚ù§Ô∏è</h1>
  <button id="yes" onclick="yesClick()">JA üíñ</button>
  <button id="no" onmouseover="moveNoButton()">NEIN ü•π</button>
</div>

<script>
let yesSize = 1;
let yesClickCount = 0;

const noBtn = document.getElementById("no");

document.addEventListener('mousemove', (e) => {
  moveNoButton(e);
});

// Dynamischer NEIN-Button, immer sichtbar, niemals au√üerhalb des Fensters
let noAngle = Math.random() * 2 * Math.PI; // aktuelle Richtung
let noSpeed = 5; // Geschwindigkeit in Pixeln pro Frame

function moveNoButton(e) {
  const rect = noBtn.getBoundingClientRect();
  const mouseX = e.clientX;
  const mouseY = e.clientY;

  // Abstand zwischen Maus und Button
  const dx = mouseX - (rect.left + rect.width / 2);
  const dy = mouseY - (rect.top + rect.height / 2);
  const distance = Math.sqrt(dx*dx + dy*dy);

  // Wenn Maus nahe, w√§hle zuf√§llige neue Richtung
  if (distance < 150) {
    noAngle = Math.random() * 2 * Math.PI;
  }

  // Bewege Button in aktueller Richtung
  let newX = rect.left + Math.cos(noAngle) * noSpeed;
  let newY = rect.top + Math.sin(noAngle) * noSpeed;

  // Bildschirm-Grenzen pr√ºfen und abprallen
  if (newX < 0) { newX = 0; noAngle = Math.random() * Math.PI - Math.PI/2; }
  if (newX > window.innerWidth - rect.width) { newX = window.innerWidth - rect.width; noAngle = Math.random() * Math.PI + Math.PI/2; }
  if (newY < 0) { newY = 0; noAngle = Math.random() * Math.PI; }
  if (newY > window.innerHeight - rect.height) { newY = window.innerHeight - rect.height; noAngle = -Math.random() * Math.PI; }

  noBtn.style.left = newX + "px";
  noBtn.style.top = newY + "px";
}

// Bewegungs-Loop
setInterval(() => {
  moveNoButton({clientX: -1000, clientY: -1000}); // Dummy-Mauskoordinaten, damit er weiter l√§uft
}, 30);

// Mausbewegung √§ndern Winkel dynamisch
document.addEventListener('mousemove', (e) => {
  const rect = noBtn.getBoundingClientRect();
  const dx = e.clientX - (rect.left + rect.width / 2);
  const dy = e.clientY - (rect.top + rect.height / 2);
  const distance = Math.sqrt(dx*dx + dy*dy);

  if (distance < 150) {
    noAngle = Math.random() * 2 * Math.PI;
  }
});

function yesClick() {
  yesSize += 0.3;
  yesClickCount++;
  const yesBtn = document.getElementById("yes");
  yesBtn.style.transform = `scale(${yesSize})`;
  yesBtn.style.background = "red";

  if (yesClickCount === 4) {
    explodeHearts(yesBtn);
  }

  if (yesSize >= 2) {
    showMeme();
  }
}

function explodeHearts(element) {
  const rect = element.getBoundingClientRect();
  const xCenter = rect.left + rect.width / 2;
  const yCenter = rect.top + rect.height / 2;

  for (let i = 0; i < 30; i++) {
    const heart = document.createElement("div");
    heart.innerHTML = "‚ù§Ô∏è";
    heart.style.position = "fixed";
    heart.style.left = xCenter + "px";
    heart.style.top = yCenter + "px";
    heart.style.fontSize = (Math.random() * 20 + 15) + "px";
    heart.style.zIndex = 2;
    heart.style.pointerEvents = "none";
    document.body.appendChild(heart);

    const angle = Math.random() * 2 * Math.PI;
    const distance = Math.random() * 200 + 50;
    const duration = Math.random() * 1000 + 800;

    heart.animate([
      { transform: `translate(0, 0)`, opacity: 1 },
      { transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px)`, opacity: 0 }
    ], {
      duration: duration,
      easing: "ease-out"
    });

    setTimeout(() => heart.remove(), duration);
  }
}

function showMeme() {
  const container = document.getElementById("questionBox");
  container.innerHTML = `
    <h1>üéâüíñ YAYYYY üíñüéâ</h1>
    <p style="font-size:20px; margin-bottom: 20px;">
      Ich wusste, dass du meine Valentine sein wolltest ‚ù§Ô∏è und ich liebe dich √ºber alles ‚ù§Ô∏è
    </p>
    <video class="meme" 
           src="KSI-YESYESYESNONONO(GreenScreen).mp4" 
           autoplay 
           loop 
           controls
           style="
             width: 7cm;
             height: 7cm;
             border-radius: 10px;
             object-fit: cover;
           ">
    </video>
  `;

  if (!document.getElementById("confetti")) {
    const canvas = document.createElement("canvas");
    canvas.id = "confetti";
    canvas.style.position = "fixed";
    canvas.style.top = 0;
    canvas.style.left = 0;
    canvas.style.width = "100%";
    canvas.style.height = "100%";
    canvas.style.zIndex = 0;
    canvas.style.pointerEvents = "none";
    document.body.appendChild(canvas);
  }

  startConfettiHearts();

  const video = document.querySelector("video");
  video.muted = false;
  video.play().catch(() => {
    console.log("Ton konnte nicht abgespielt werden.");
  });
}

/* Herz-Konfetti */
function startConfettiHearts() {
  const canvas = document.getElementById("confetti");
  const ctx = canvas.getContext("2d");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const hearts = Array.from({length: 100}, () => ({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height - canvas.height,
    size: Math.random() * 15 + 10,
    color: `hsl(${Math.random() * 360}, 80%, 60%)`,
    speed: Math.random() * 2 + 1,
    angle: Math.random() * Math.PI * 2
  }));

  function drawHeart(x, y, size, color) {
    ctx.save();
    ctx.translate(x, y);
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(0, -size/2);
    ctx.bezierCurveTo(size/2, -size*0.9, size*1.2, size/3, 0, size);
    ctx.bezierCurveTo(-size*1.2, size/3, -size/2, -size*0.9, 0, -size/2);
    ctx.fill();
    ctx.restore();
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    hearts.forEach(h => {
      drawHeart(h.x, h.y, h.size, h.color);
      h.y += h.speed;
      h.x += Math.sin(h.angle) * 0.5;
      h.angle += 0.02;
      if (h.y > canvas.height) {
        h.y = -h.size;
        h.x = Math.random() * canvas.width;
      }
    });
  }

  setInterval(draw, 20);
  window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  });
}
</script>

</body>
</html>
